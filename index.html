<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>Genel Bakım Sistemi – V10 Enterprise</title>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700;800&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    :root {
      --bg: #0b1220;
      --card: #0f172a;
      --border: #1f2a44;
      --border2: #2b3a5f;
      --text: #e7eefc;
      --muted: #9bb0d3;
      --indigo: #4f46e5;
      --indigo2: #6366f1;
      --green: #16a34a;
      --green2: #22c55e;
    }
    html, body {
      background: var(--bg);
      color: var(--text);
      font-family: 'Montserrat', sans-serif;
      -webkit-tap-highlight-color: transparent;
    }
    .card {
      background: linear-gradient(180deg, rgba(15,23,42,1) 0%, rgba(11,18,32,1) 100%);
      border: 1px solid var(--border);
      box-shadow: 0 18px 60px rgba(0,0,0,0.35);
    }
    .topbar {
      background: linear-gradient(90deg, var(--indigo) 0%, var(--indigo2) 100%);
      height: 6px;
      border-radius: 999px;
    }
    .label {
      font-weight: 800;
      font-size: 0.70rem;
      color: var(--muted);
      text-transform: uppercase;
      letter-spacing: 0.12em;
      margin-bottom: 6px;
      display: block;
    }
    .input {
      background: rgba(15,23,42,0.8);
      border: 1px solid var(--border2);
      color: var(--text);
      border-radius: 16px;
      padding: 14px 16px;
      width: 100%;
      outline: none;
      font-weight: 700;
    }
    .input:focus {
      border-color: var(--indigo2);
      box-shadow: 0 0 0 4px rgba(99,102,241,0.15);
    }
    .chip {
      border: 1px solid var(--border2);
      background: rgba(11,18,32,0.65);
      padding: 10px 12px;
      border-radius: 16px;
      font-weight: 800;
      font-size: 0.78rem;
      cursor: pointer;
      transition: 0.25s;
      text-align: center;
    }
    input[type="radio"].sr-only:checked + .chip {
      background: var(--indigo);
      color: white;
      border-color: var(--indigo2);
    }
    .btn {
      width: 100%;
      padding: 16px;
      border-radius: 18px;
      font-weight: 900;
      text-transform: uppercase;
      transition: 0.25s;
    }
    .btn-primary { background: linear-gradient(90deg, var(--indigo) 0%, var(--indigo2) 100%); color: white; }
    .btn-green { background: linear-gradient(90deg, var(--green) 0%, var(--green2) 100%); color: white; }
    .panel { background: rgba(11,18,32,0.55); border: 1px solid var(--border2); border-radius: 18px; padding: 14px; }
    .hint { color: rgba(155,176,211,0.75); font-weight: 600; font-size: 0.85rem; }
    .divider { border-top: 1px solid rgba(43,58,95,0.6); margin: 18px 0; }
    .output { white-space: pre-wrap; line-height: 1.8rem; font-size: 0.95rem; font-weight: 600; background: rgba(2,6,23,0.65); border-radius: 18px; padding: 16px; }
    
    .overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.7); display: none; align-items: center; justify-content: center; z-index: 1000; }
    .spinner { width: 40px; height: 40px; border: 4px solid rgba(99,102,241,0.2); border-top-color: var(--indigo2); border-radius: 50%; animation: spin 0.8s linear infinite; }
    @keyframes spin { to { transform: rotate(360deg); } }
  </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4">

  <div class="w-full max-w-3xl card rounded-3xl p-6 md:p-10">
    <div class="topbar w-full mb-6"></div>
    <h1 class="text-2xl font-black text-center uppercase italic">V10 Enterprise Bakım Paneli</h1>
    <p class="hint text-center mt-2">WhatsApp konuşmasını analiz ederek kişiye özel büyü tespit metni hazırlar.</p>

    <div class="divider"></div>

    <div class="mb-6">
      <span class="label">Danışan Hitap Şekli</span>
      <div class="grid grid-cols-2 gap-4">
        <label><input class="sr-only" type="radio" name="hitap" value="Hanım" checked><div class="chip">KADIN (HANIM)</div></label>
        <label><input class="sr-only" type="radio" name="hitap" value="Bey"><div class="chip">ERKEK (BEY)</div></label>
      </div>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-6">
      <div><span class="label">Danışan Adı</span><input id="isim" class="input uppercase" placeholder="Ad"></div>
      <div><span class="label">Danışan Anne Adı</span><input id="anne" class="input uppercase" placeholder="Anne Adı"></div>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
      <div><span class="label">Muhatap Adı</span><input id="karsi" class="input uppercase" placeholder="Ad"></div>
      <div><span class="label">Muhatap Anne Adı</span><input id="kAnne" class="input uppercase" placeholder="Anne Adı"></div>
    </div>

    <div class="divider"></div>

    <div>
      <span class="label">WhatsApp Konuşması / Belirtiler (Analiz Buradan Yapılır)</span>
      <textarea id="log" rows="5" class="input text-sm" placeholder="Buraya yapıştırın..."></textarea>
    </div>

    <div class="divider"></div>

    <div class="panel mb-6">
      <span class="label text-green-300">WhatsApp Gönderim</span>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <input id="tel" class="input text-center font-bold" placeholder="5xx xxx xx xx">
        <button class="btn btn-green" onclick="sendWhatsApp()">WhatsApp'a Aktar</button>
      </div>
    </div>

    <button id="btnGenerate" class="btn btn-primary" onclick="generate()">Analizi Başlat</button>

    <div id="resultWrap" class="mt-8 hidden">
      <div class="panel">
        <div class="flex justify-between items-center mb-4">
          <span class="font-black uppercase tracking-widest text-indigo-300">Bakım Sonucu</span>
          <button class="bg-slate-800 px-4 py-2 rounded-lg text-xs font-bold" onclick="copyText()">Kopyala</button>
        </div>
        <div id="output" class="output"></div>
      </div>
    </div>
  </div>

  <div id="overlay" class="overlay">
    <div class="bg-slate-900 p-8 rounded-3xl border border-slate-700 flex flex-col items-center gap-4">
      <div class="spinner"></div>
      <div id="overlayMsg" class="font-bold text-indigo-100">Konuşma Analiz Ediliyor...</div>
    </div>
  </div>

  <script>
    const $ = id => document.getElementById(id);

    function toTitle(s) {
      if (!s) return "";
      const low = s.trim().toLocaleLowerCase("tr-TR");
      return low.charAt(0).toLocaleUpperCase("tr-TR") + low.slice(1);
    }

    function generate() {
      const isim = toTitle($("isim").value);
      const anne = toTitle($("anne").value);
      const karsi = toTitle($("karsi").value);
      const kAnne = toTitle($("kAnne").value);
      const log = $("log").value.trim();
      const hitapInput = document.querySelector('input[name="hitap"]:checked');
      const hitap = hitapInput ? hitapInput.value : "Hanım";

      if (!isim || !anne || !log) {
        alert("Lütfen isim, anne adı ve konuşma içeriğini girin.");
        return;
      }

      $("overlay").style.display = "flex";
      
      setTimeout(() => {
        const result = buildContent({ isim, anne, karsi, kAnne, log, hitap });
        $("output").innerText = result;
        $("resultWrap").classList.remove("hidden");
        $("overlay").style.display = "none";
        $("resultWrap").scrollIntoView({ behavior: "smooth" });
      }, 1500);
    }

    function buildContent(ctx) {
      const analysis = analyzeDeep(ctx.log);
      const spell = decideSpell(analysis.themes);
      
      let blocks = [];
      
      // 1. Giriş
      blocks.push(`${ctx.isim} ${ctx.hitap}, verdiğiniz bilgiler (Danışan: ${ctx.isim} - Anne Adı: ${ctx.anne}${ctx.karsi !== "" ? `, Muhatap: ${ctx.karsi} - Anne Adı: ${ctx.kAnne}` : ""}) doğrultusunda detaylı bir bakım ve konuşma analizi gerçekleştirdim.`);

      // 2. Analiz Vurgusu (WhatsApp Logu ile Bağlantı Kurma)
      blocks.push(`İlettiğiniz konuşma akışını ve yaşadığınız süreci incelediğimde; özellikle **${analysis.highlights.join(", ")}** gibi durumlar, sıradan bir anlaşmazlığın çok ötesinde bir negatif müdahalenin işaretidir.`);

      // 3. Tespit
      blocks.push(`Yapılan taramada, ${ctx.karsi !== "" ? "aranızdaki bağı koparmak" : "yolunuzu kapatmak"} amacıyla yapılmış olan **${spell.name}** adı verilen ağır bir büyü işlemi tespit edildi. Bu büyü, kişinin iradesini baskılar ve kalbindeki muhabbeti soğutarak mantıksız geri çekilmelere neden olur.`);

      // 4. Detaylı Gözlem (Konuşmaya Göre Şekillenen Kısım)
      let customObservation = `Konuşmalarda beliren o ani değişimler, ${analysis.themes.includes("iletişimde kopukluk") ? "cevap vermeme veya engelleme gibi tavırlar" : "maddi ve manevi yöndeki ani tıkanmalar"} tamamen bu işlemin frekansınızı bozmasından kaynaklanıyor. Siz ne kadar yapıcı olmaya çalışırsanız çalışın, karşıdaki kişi büyü etkisi altında olduğu için gerçekleri göremiyor.`;
      blocks.push(customObservation);

      // 5. Müdahale ve Söz
      blocks.push(`Allah’ın izniyle tespit edilen bu **${spell.name}** çalışmamızla birlikte kesin ve kalıcı olarak bozulacaktır. Bu bozma işlemiyle birlikte üzerinizdeki o ağır yük kalkacak, büyü etkisi temizlenecek ve ${ctx.karsi !== "" ? "muhatabınızın size karşı olan kalbi yeniden açılacaktır" : "hayatınızdaki tıkanıklıklar giderilecektir"}.`);

      // 6. Süreç (Sabit ve Net)
      blocks.push(`Programımız şu şekilde ilerleyecektir: İlk gün temel enerji temizliği yapılır ve büyü bozma işleminin kayıtları size iletilir. Ardından 7 gün sürecek olan özel okuma ve niyet sabitleme döngüsüne geçilir. 3. günden itibaren büyü etkisinin dağılmasıyla birlikte karşı tarafta yumuşama ve iletişime geçme isteği başlar; 7. günün sonunda ise bağ tamamen sağlamlaşır.`);

      // 7. Uyarı
      blocks.push(`Önemli bir not: Bu 7 günlük süreçte başka bir hocadan veya yerden müdahale almamalı, süreci sadece bizim kanalımızda sabit tutmalısınız. Farklı enerjilerin çakışması işlemin toparlanmasını geciktirebilir.`);

      // 8. Kapanış
      blocks.push(`Buradan sonrası kararlılık meselesidir. Ben bu büyüyü kökten bozmaya ve sizi feraha ulaştırmaya hazırım. Devam etmek isterseniz bilgilendirmeniz yeterlidir. (Hazırlıklar kişiye özel olduğu için belirli bir bedel oluşmaktadır.)`);

      let finalMetin = blocks.join("\n\n");
      const minLimit = 2200; 

      if (finalMetin.length < minLimit) {
        finalMetin += "\n\n" + buildExtraAdvice(minLimit - finalMetin.length);
      }

      return cleanRepeats(finalMetin);
    }

    function analyzeDeep(log) {
      const low = log.toLowerCase();
      const themes = [];
      const highlights = [];

      if (/engell|mesaj at|cevap verm|yazmıy/.test(low)) {
          themes.push("iletişimde kopukluk");
          highlights.push("iletişimin bir anda kesilmesi ve engellenme hali");
      }
      if (/soğud|istem|uzak|bitsin|sevmiy/.test(low)) {
          themes.push("kalbi soğuma");
          highlights.push("duygulardaki ani değişim ve sebepsiz soğuma");
      }
      if (/başka biri|aldat|kadın|erkek|üçüncü/.test(low)) {
          themes.push("üçüncü şahıs müdahalesi");
          highlights.push("araya giren dış etkiler ve niyet bozan kişiler");
      }
      if (/aile|anne|baba|izin verm|karşı/.test(low)) {
          themes.push("aile baskısı");
          highlights.push("aile tarafındaki sertleşme ve hane direnci");
      }
      if (/para|borç|iş|bereket|icra/.test(low)) {
          themes.push("rızık daralması");
          highlights.push("maddi kapılardaki ani kapanma ve bereket kaybı");
      }
      if (/uyku|kabus|daral|ağlama|sıkıntı/.test(low)) {
          themes.push("ruhsal daralma");
          highlights.push("gece gelen huzursuzluklar ve üzerinizdeki ağır baskı");
      }

      if (themes.length === 0) {
          themes.push("genel tıkanıklık");
          highlights.push("hayatın genel akışındaki ani duraksama");
      }

      return { themes, highlights };
    }

    function decideSpell(themes) {
      const t = themes.join(" ");
      if (t.includes("iletişim") || t.includes("soğuma")) return { name: "Ayırma ve Soğutma Büyüsü" };
      if (t.includes("şahıs")) return { name: "Fitne ve Niyet Dağıtma Büyüsü" };
      if (t.includes("rızık")) return { name: "Rızık Kapama ve Kısmet Bağlama Büyüsü" };
      if (t.includes("aile")) return { name: "Hane Direnci ve Yuva Dağıtma Büyüsü" };
      return { name: "Niyet Dağıtma ve Yol Bağlama Büyüsü" };
    }

    function buildExtraAdvice(needed) {
      const advices = [
        "Unutmayın ki büyü yoluyla gelen negatiflik temizlenmediği sürece ruhunuzu ve hayatınızı daha çok saracaktır.",
        "Süreçte teslimiyet göstermek ve zihni olumsuz senaryolardan temizlemek, bozma işleminin hızını doğrudan etkiler.",
        "Bu durum sadece sizin başınıza gelen bir şanssızlık değil, doğrudan iradenize ve mutluluğunuza yapılmış bir saldırıdır.",
        "Kendi içinizde hissettiğiniz o sebepsiz korkular ve gel-gitler aslında bu negatif frekansın ruhunuza yaptığı baskının sonucudur.",
        "Doğru zamanda yapılan müdahale, aylarca hatta yıllarca sürebilecek bir acıyı kısa sürede sonlandırabilir."
      ];
      let res = "";
      let i = 0;
      while (res.length < Math.max(needed, 800) && i < advices.length) {
        res += advices[i] + " ";
        i++;
      }
      return res.trim();
    }

    function cleanRepeats(text) {
      const sents = text.split(". ");
      const unique = [];
      sents.forEach(s => {
        if (!unique.some(u => u.substring(0, 25) === s.substring(0, 25))) {
          unique.push(s);
        }
      });
      return unique.join(". ").replace(/\n{3,}/g, "\n\n");
    }

    function copyText() {
      const t = $("output").innerText;
      if(!t) return;
      navigator.clipboard.writeText(t);
      alert("Metin kopyalandı!");
    }

    function sendWhatsApp() {
      const t = $("output").innerText;
      if(!t) { alert("Önce metni oluşturun."); return; }
      let tel = $("tel").value.replace(/\D/g, "");
      if (tel && !tel.startsWith("90")) tel = "90" + tel;
      const url = tel ? `https://wa.me/${tel}?text=${encodeURIComponent(t)}` : `https://wa.me/?text=${encodeURIComponent(t)}`;
      window.open(url, "_blank");
    }
  </script>
</body>
</html>
