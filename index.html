<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
<title>Genel Bakım Sistemi – V10 Enterprise</title>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700;800&display=swap" rel="stylesheet">
<script src="https://cdn.tailwindcss.com"></script>
<style>
:root{--bg:#0b1220;--card:#0f172a;--card2:#0b1220;--border:#1f2a44;--border2:#2b3a5f;--text:#e7eefc;--muted:#9bb0d3;--indigo:#4f46e5;--indigo2:#6366f1;--green:#16a34a;--green2:#22c55e}
html,body{background:var(--bg);color:var(--text);font-family:'Montserrat',sans-serif;-webkit-tap-highlight-color:transparent}
.card{background:linear-gradient(180deg,#0f172a 0%,#0b1220 100%);border:1px solid var(--border);box-shadow:0 18px 60px rgba(0,0,0,.35)}
.topbar{background:linear-gradient(90deg,var(--indigo) 0%,var(--indigo2) 100%);height:6px;border-radius:999px}
.label{font-weight:800;font-size:.7rem;color:var(--muted);text-transform:uppercase;letter-spacing:.12em;margin-bottom:6px;display:block}
.input{background:rgba(15,23,42,.8);border:1px solid var(--border2);color:var(--text);transition:.2s;border-radius:16px;padding:14px 16px;width:100%;outline:none;font-weight:700}
.input:focus{border-color:rgba(99,102,241,.9);box-shadow:0 0 0 4px rgba(99,102,241,.15)}
.chip{border:1px solid var(--border2);background:rgba(11,18,32,.65);padding:10px 12px;border-radius:16px;font-weight:800;font-size:.78rem;cursor:pointer;text-align:center}
input[type=radio].sr-only:checked+.chip{border-color:rgba(129,140,248,.9);background:rgba(79,70,229,.95);color:#fff}
.btn{width:100%;padding:16px;border-radius:18px;font-weight:900;letter-spacing:.04em;text-transform:uppercase}
.btn-primary{background:linear-gradient(90deg,var(--indigo) 0%,var(--indigo2) 100%);color:#fff}
.btn-green{background:linear-gradient(90deg,var(--green) 0%,var(--green2) 100%);color:#fff}
.panel{background:rgba(11,18,32,.55);border:1px solid var(--border2);border-radius:18px;padding:14px}
.hint{color:rgba(155,176,211,.75);font-weight:600;font-size:.85rem;line-height:1.45rem}
.divider{border-top:1px solid rgba(43,58,95,.6);margin:18px 0}
.output{white-space:pre-wrap;line-height:1.9rem;font-size:.95rem;font-weight:650;background:rgba(2,6,23,.65);border:1px solid rgba(43,58,95,.85);border-radius:18px;padding:16px}
.overlay{position:fixed;inset:0;background:rgba(0,0,0,.55);display:none;align-items:center;justify-content:center;z-index:1000;padding:20px}
.overlay-card{background:rgba(15,23,42,.95);border:1px solid rgba(43,58,95,.85);border-radius:22px;padding:18px;width:min(540px,100%)}
.spinner{width:44px;height:44px;border-radius:999px;border:4px solid rgba(99,102,241,.2);border-top-color:rgba(99,102,241,.95);animation:spin .9s linear infinite}
@keyframes spin{to{transform:rotate(360deg)}}
</style>
</head>
<body class="min-h-screen flex items-center justify-center p-4">
<div class="w-full max-w-3xl card rounded-3xl p-5 md:p-10 relative">
<div class="topbar w-full mb-6"></div>
<h1 class="text-xl md:text-2xl font-black text-center uppercase italic">Genel Bakım Analiz Sistemi</h1>
<p class="hint text-center mt-2">Bilgileri girin, konuşmayı yapıştırın; sistem tek parça WhatsApp bakım metnini üretir.</p>
<div class="divider"></div>

<div class="grid grid-cols-2 gap-3">
<div>
<span class="label">Hitap</span>
<div class="grid grid-cols-2 gap-3">
<label><input class="sr-only" type="radio" name="hitap" value="Hanım" checked><div class="chip">KADIN (HANIM)</div></label>
<label><input class="sr-only" type="radio" name="hitap" value="Bey"><div class="chip">ERKEK (BEY)</div></label>
</div>
</div>
<div>
<span class="label">Çıktı Modu</span>
<select id="mode" class="input">
<option value="short" selected>Kısa (≈2500–3200)</option>
<option value="long">Uzun (≈4200–4800)</option>
</select>
</div>
</div>

<div class="divider"></div>
<div class="grid grid-cols-1 md:grid-cols-2 gap-4">
<div><span class="label">Danışan Adı</span><input id="isim" class="input uppercase" placeholder="Örn: Saadet"></div>
<div><span class="label">Danışan Anne Adı</span><input id="anne" class="input uppercase" placeholder="Örn: Ayşe"></div>
</div>
<div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
<div><span class="label">Muhatap Adı</span><input id="karsi" class="input uppercase" placeholder="Örn: Edip"></div>
<div><span class="label">Muhatap Anne Adı</span><input id="kAnne" class="input uppercase" placeholder="Örn: Mine"></div>
</div>

<div class="divider"></div>
<div>
<span class="label">WhatsApp Konuşması / Belirtiler</span>
<textarea id="log" rows="6" class="input"></textarea>
</div>

<div class="divider"></div>
<div class="panel">
<span class="label text-green-300">WhatsApp Gönderim (Opsiyonel)</span>
<div class="grid grid-cols-1 md:grid-cols-2 gap-4">
<input id="tel" class="input text-center font-black" placeholder="5xx xxx xx xx">
<button class="btn btn-green" type="button" onclick="sendWhatsApp()">WhatsApp ile Gönder</button>
</div>
</div>

<div class="divider"></div>
<button id="btnGenerate" class="btn btn-primary" type="button">Bakım Metnini Oluştur</button>

<div id="resultWrap" class="mt-6 hidden">
<div class="panel">
<div class="flex items-center justify-between gap-3">
<div class="font-black uppercase">Üretilen Metin</div>
<button class="px-4 py-3 rounded-2xl font-black bg-slate-800" onclick="copyText()">Kopyala</button>
</div>
<div class="divider"></div>
<div id="output" class="output"></div>
</div>
</div>
</div>

<div id="overlay" class="overlay">
<div class="overlay-card">
<div class="flex items-center gap-4">
<div class="spinner"></div>
<div>
<div class="font-black text-lg">Analiz yapılıyor...</div>
<div class="hint">Bakım metni hazırlanıyor</div>
</div>
</div>
</div>
</div>

<script>
const $=id=>document.getElementById(id);
const safe=v=>(v||"").toString().trim();
const titleTr=s=>{s=safe(s);if(!s)return"";const l=s.toLocaleLowerCase('tr-TR');return l[0].toLocaleUpperCase('tr-TR')+l.slice(1)};
const getHitap=()=>document.querySelector('input[name="hitap"]:checked')?.value||"Hanım";

function normalizePhone(raw){const n=(raw||"").replace(/\D/g,"");if(!n)return"";if(n.startsWith("90"))return n;if(n.startsWith("0"))return"90"+n.slice(1);return"90"+n}
function openWa(phone,text){const url=phone?`https://wa.me/${phone}?text=${encodeURIComponent(text)}`:`https://wa.me/?text=${encodeURIComponent(text)}`;window.open(url,"_blank")}
function sendWhatsApp(){const t=safe($('output').innerText);if(!t)return alert('Önce metni oluşturun');openWa(normalizePhone($('tel').value),t)}
function copyText(){const t=safe($('output').innerText);if(!t)return;navigator.clipboard.writeText(t);alert('Kopyalandı')}

function analyzeLog(raw){const l=safe(raw).toLowerCase();return{family:/aile|anne|baba|abla|abi|karşı/.test(l),money:/para|borç|iş|rızık|bereket/.test(l),cooling:/soğud|ayr|terk|engell/.test(l),indecision:/kararsız|gelgit|net değil/.test(l)}}
function decideSpell(a){if(a.money)return"Rızık Kapama ve Bereket Düğümü";if(a.family)return"Ev–Eşik Serpiştirme (Aile Engeli)";if(a.cooling)return"Ayırma ve Soğutma";return"Karar Zayıflatma"}

function buildCareText(ctx){const a=analyzeLog(ctx.log);const spell=decideSpell(a);
let text=[
`${ctx.isim} ${ctx.hitap}, verdiğiniz isimler üzerinden yaptığım bakımda ana düğüm netleşti.`,
`Tespit edilen durum ${spell} kaynaklıdır ve günlük hayatta belirgin etkiler oluşturur.`,
`Allah’ın izniyle bu düğüm kesin ve kalıcı şekilde bozulacaktır.`,
`İlk gün uygulama yapılır ve video ile paylaşılır. 7 gün okuma yürütülür. 3–5 gün içinde yumuşama, 7. gün net toparlanma görülür.`,
`Bu süreç tek niyetle yürütülür. Nasıl ilerlemek istediğinizi söylemeniz yeterlidir.`
].join("\n\n");
return enforceLen(text,ctx.mode)}

function enforceLen(t,mode){const min=mode==='long'?4200:2400;let o=t;while(o.length<min){o+="\n\nBu süreçte istikrar korunur ve dış müdahale alınmaz."}return o}

$('btnGenerate').onclick=()=>{
const ctx={isim:titleTr($('isim').value)||'Danışan',anne:titleTr($('anne').value),karsi:titleTr($('karsi').value),kAnne:titleTr($('kAnne').value),hitap:getHitap(),mode:$('mode').value,log:safe($('log').value)};
if(!ctx.anne||!ctx.log)return alert('Gerekli alanları doldurun');
$('overlay').style.display='flex';
setTimeout(()=>{const t=buildCareText(ctx);$('output').innerText=t;$('resultWrap').classList.remove('hidden');$('overlay').style.display='none'},600)
}
</script>
</body>
</html>
