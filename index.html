<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>V10 Enterprise Apex Elite – Bakım Oluşturma</title>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;600;700;800;900&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    :root {
      --bg-deep: #020617;
      --bg-card: #0b1120;
      --indigo-glow: #6366f1;
      --indigo-soft: rgba(99, 102, 241, 0.1);
      --border-color: #1e293b;
      --text-main: #f8fafc;
      --text-muted: #94a3b8;
      --danger: #ef4444;
    }

    body {
      background-color: var(--bg-deep);
      color: var(--text-main);
      font-family: 'Montserrat', sans-serif;
      overflow-x: hidden;
    }

    .glass-panel {
      background: var(--bg-card);
      border: 1px solid var(--border-color);
      box-shadow: 0 0 50px rgba(0, 0, 0, 0.7);
    }

    .terminal-font { font-family: 'JetBrains Mono', monospace; }

    .apex-input {
      background: rgba(2, 6, 23, 0.9);
      border: 1px solid var(--border-color);
      color: var(--text-main);
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .apex-input:focus {
      border-color: var(--indigo-glow);
      box-shadow: 0 0 25px var(--indigo-soft);
      outline: none;
    }

    .apex-btn {
      background: linear-gradient(135deg, #4338ca 0%, #6366f1 100%);
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
      border: 1px solid rgba(255,255,255,0.1);
    }

    .apex-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 15px 30px rgba(99, 102, 241, 0.4);
    }

    .log-console {
      background: #000;
      border: 1px solid #1e293b;
      height: 100px;
      overflow-y: auto;
      padding: 12px;
      font-size: 11px;
      color: #6366f1;
      line-height: 1.5;
    }

    .output-container {
      background: #020617;
      border-left: 4px solid var(--indigo-glow);
    }

    ::-webkit-scrollbar { width: 4px; }
    ::-webkit-scrollbar-thumb { background: var(--border-color); border-radius: 10px; }
  </style>
</head>
<body class="min-h-screen py-12 px-4">

  <div class="max-w-4xl mx-auto space-y-10">
    
    <header class="text-center space-y-4">
      <h1 class="text-4xl font-black uppercase tracking-tighter text-indigo-400 italic">
        Bakım Oluşturma Sistemi
      </h1>
      <div class="w-20 h-1 bg-indigo-500 mx-auto rounded-full opacity-50"></div>
    </header>

    <div class="glass-panel rounded-[2rem] p-8 md:p-12 relative overflow-hidden">
      
      <div class="space-y-10">
        
        <!-- Kimlik Alanları -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
          <section class="space-y-6">
            <h3 class="text-[10px] font-black text-indigo-400 uppercase tracking-widest">Danışan Bilgisi</h3>
            <div class="grid grid-cols-1 gap-4">
              <input id="isim" class="apex-input w-full p-5 rounded-xl text-sm font-bold uppercase" placeholder="İsim">
              <input id="anne" class="apex-input w-full p-5 rounded-xl text-sm font-bold uppercase" placeholder="Anne Adı">
            </div>
            
            <div class="space-y-4">
              <!-- Cinsiyet Seçimi -->
              <div class="flex p-1 bg-slate-950 rounded-xl border border-border-color">
                <button onclick="setHitap('Hanım')" id="btnHanım" class="hitap-btn flex-1 py-3 rounded-lg text-[10px] font-black transition-all bg-indigo-600 text-white">KADIN (HANIM)</button>
                <button onclick="setHitap('Bey')" id="btnBey" class="hitap-btn flex-1 py-3 rounded-lg text-[10px] font-black transition-all text-slate-500">ERKEK (BEY)</button>
              </div>

              <!-- WhatsApp Bölümü -->
              <div class="space-y-2">
                <label class="text-[10px] font-black text-indigo-400 uppercase tracking-widest ml-1">WhatsApp Numara Ekleme</label>
                <input id="tel" class="apex-input w-full p-6 rounded-xl text-center font-bold text-lg tracking-[0.2em] text-indigo-200" placeholder="5xx xxx xx xx">
              </div>
            </div>
          </section>

          <section class="space-y-6">
            <h3 class="text-[10px] font-black text-slate-500 uppercase tracking-widest">Karşı Taraf</h3>
            <div class="grid grid-cols-1 gap-4">
              <input id="karsi" class="apex-input w-full p-5 rounded-xl text-sm font-bold uppercase" placeholder="Muhatap İsmi">
              <input id="kAnne" class="apex-input w-full p-5 rounded-xl text-sm font-bold uppercase" placeholder="Muhatap Anne Adı">
            </div>
            <div class="p-6 bg-slate-950/30 border border-dashed border-slate-800 rounded-xl h-[120px] flex items-center justify-center text-center">
              <p class="text-[10px] text-slate-600 italic leading-relaxed">Muhatap bilgisi yoksa <br>bu alanları boş bırakabilirsiniz.</p>
            </div>
          </section>
        </div>

        <!-- Süreç Alanı -->
        <section class="space-y-4">
          <div class="flex justify-between items-center">
            <h3 class="text-[10px] font-black text-indigo-400 uppercase tracking-widest">Durum ve Belirtiler</h3>
            <span id="charCount" class="text-[9px] terminal-font text-slate-600">0 CHAR</span>
          </div>
          <textarea id="log" rows="6" class="apex-input w-full p-6 rounded-2xl text-sm font-semibold leading-relaxed" 
            placeholder="Analiz edilmesi gereken olayları veya mesajları buraya aktarın..."></textarea>
        </section>

        <!-- Analiz Butonu -->
        <section class="space-y-6">
          <div class="log-console terminal-font rounded-lg" id="systemLog">
            > Ready for maintenance analysis...
          </div>
          
          <div class="flex flex-col md:flex-row gap-4">
            <button onclick="runLocalAnalysis()" id="mainActionButton" class="apex-btn flex-1 py-6 rounded-2xl font-black text-xs tracking-[0.3em] flex items-center justify-center gap-3">
              <span>BAKIM OLUŞTUR VE ANALİZ ET</span>
            </button>
            <button onclick="shareWhatsApp()" class="px-8 rounded-2xl bg-emerald-600 hover:bg-emerald-500 text-white transition-all shadow-lg flex items-center justify-center">
                <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/></svg>
            </button>
          </div>
        </section>

      </div>
    </div>

    <!-- Sonuç Bölümü -->
    <section id="resultZone" class="hidden opacity-0 transform translate-y-10 transition-all duration-1000">
      <div class="glass-panel rounded-[2rem] p-10 md:p-14 overflow-hidden relative">
        <div class="flex flex-col md:flex-row justify-between items-center gap-10 mb-12">
          <div class="space-y-3">
            <div class="text-indigo-400 text-[10px] font-black uppercase tracking-[0.3em]">Manevi Teşhis</div>
            <h2 class="text-3xl font-black italic">Bakım Kararnamesi</h2>
          </div>
          <div class="flex gap-4">
            <button onclick="copyVerdict()" class="px-10 py-4 bg-white text-black rounded-xl font-black text-[10px] uppercase hover:bg-indigo-500 hover:text-white transition-all">KOPYALA</button>
          </div>
        </div>
        <div id="verdictOutput" class="output-container p-8 md:p-12 text-slate-300 text-lg md:text-xl leading-[2.4] font-medium italic border-indigo-500/50"></div>
      </div>
    </section>

  </div>

  <!-- Overlay -->
  <div id="globalOverlay" class="fixed inset-0 bg-slate-950/98 z-[100] hidden flex-col items-center justify-center text-center p-10">
    <div class="w-32 h-32 mb-10 border-4 border-indigo-500/20 border-t-indigo-500 rounded-full animate-spin"></div>
    <div id="loaderStatus" class="text-2xl font-black italic text-indigo-100 uppercase tracking-tighter mb-2">Bakım Yapılıyor...</div>
    <div class="text-indigo-500/60 terminal-font text-[10px] uppercase tracking-widest">Neural Logic Apex V10</div>
  </div>

  <script>
    const state = { hitap: "Hanım" };

    function setHitap(h) {
      state.hitap = h;
      document.querySelectorAll('.hitap-btn').forEach(b => {
        b.classList.remove('bg-indigo-600', 'text-white');
        b.classList.add('text-slate-500');
      });
      event.target.classList.add('bg-indigo-600', 'text-white');
      event.target.classList.remove('text-slate-500');
    }

    function writeLog(msg) {
      const console = document.getElementById('systemLog');
      if (console) {
        console.innerHTML += `<br>> ${msg}`;
        console.scrollTop = console.scrollHeight;
      }
    }

    /* ============================================================
       ENHANCED LOCAL ENGINE - SCORING SYSTEM
    ============================================================ */
    const DATABASE = {
      spells: [
        { 
          id: "papaz", 
          name: "7 MÜHÜRLÜ KARANLIK PAPAZ BÜYÜSÜ", 
          keywords: ["papaz", "ölüm", "kuyu", "hristiyan", "kilise", "ibranice", "süryanice", "kara büyü", "zifiri"],
          observation: "iradenin tamamen prangalanması ve kalbin mühürlenmesi",
          intensity: "ZİFİRİ / MUTLAK" 
        },
        { 
          id: "sabun", 
          name: "ERİTME VE TÜKETME SABUN BÜYÜSÜ", 
          keywords: ["sabun", "erime", "iğne", "zayıfla", "eriyorum", "halsiz", "su", "lavabo"],
          observation: "bedensel ve ruhsal enerjinin günden güne tükenmesi",
          intensity: "HAYATİ / TEHLİKELİ" 
        },
        { 
          id: "kasik", 
          name: "TERS BAĞLANMIŞ KAŞIK AYIRMA BÜYÜSÜ", 
          keywords: ["kaşık", "tahta", "mutfak", "yemek", "sırt sırta", "yüz yüze", "ayırma", "bağlama"],
          observation: "en yakın canların bile birbirine tahammül edememesi",
          intensity: "KESKİN / EBEDİ" 
        },
        { 
          id: "domuz", 
          name: "DOMUZ YAĞI VE NECASET SOĞUTMA BÜYÜSÜ", 
          keywords: ["domuz", "yağ", "leke", "tiksin", "eşik", "kapı", "koku", "soğuma", "soğuk"],
          observation: "haneye ve ilişkiye sirayet eden o derin tiksinti hissi",
          intensity: "NECASET / AĞIR" 
        },
        { 
          id: "kilit", 
          name: "7 KİLİTLİ KISMET VE YOL BAĞLAMA BÜYÜSÜ", 
          keywords: ["kilit", "mühür", "bağlı", "kapalı", "anahtar", "düğüm", "kısmet", "açılmıyor"],
          observation: "atılan her adımın sanki bir duvara çarpıp geri dönmesi",
          intensity: "MÜHÜRLÜ / KUVVETLİ" 
        },
        { 
          id: "mezarlik", 
          name: "ÖLÜ TOPRAĞI MÜHÜRLÜ AYIRMA TERTİBİ", 
          keywords: ["toprak", "mezar", "ölü", "gece", "kefen", "musalla", "kabir", "korku"],
          observation: "üzerinize çöken o ağır ölü toprağı ve yaşamdan kopma hissi",
          intensity: "AĞIR / MEZARLIK" 
        }
      ],
      blocks: {
        intro: [
          (c) => `${c.isim} ${state.hitap}, paylaştığınız manevi izler (Danışan: ${c.isim} - Anne: ${c.anne}${c.karsi ? `, Muhatap: ${c.karsi}` : ""}) doğrultusunda yaptığım manevi inceleme sonucunda hayatınızı ve yolunuzu mühürleyen karanlığın asıl kaynağına mutlak bir netlikle ulaştım.`,
          (c) => `${c.isim} ${state.hitap}, ferasetimle yaptığım inceleme neticesinde üzerinizdeki o ağır perdenin ve bu tıkanıklığın tesadüf değil, doğrudan bir büyü işlemi olduğunu bizzat müşahede ettim.`
        ],
        detection: [
          (s, c) => `Maneviyat alemindeki taramamda, ${c.karsi ? "aranızdaki kutsal bağı parçalayıp karşı tarafı sizden soğutmak" : "hayat yolunuzu mühürlemek"} amacıyla hazırlanmış, ${s.intensity} seviyesinde bir **${s.name}** tüm karanlığıyla karşımda durmaktadır.`,
          (s, c) => `Üzerinizdeki bu ağırlık, doğrudan saadetine kasteden ve ${s.intensity} bir hükümle hazırlanan **${s.name}** adlı zifiri şer işlemidir.`
        ],
        observation: [
          (obs) => `Özellikle belirttiğiniz belirtilerde görülen **${obs}** hali, bu büyü mühürlerinin fiziksel dünyadaki acı verici yansımalarıdır. Karşı tarafın o anlaşılmaz tavırları aslında kendi iradesiyle değil, bu baskının yönlendirmesiyle oluşmaktadır.`,
          (obs) => `Maneviyat alemindeki bu kilitlenme, hayatınıza **${obs}** olarak sirayet etmiştir. Bu mühürler kırılmadığı sürece karşı tarafın hür iradesiyle size dönmesi imkansızdır.`
        ],
        verdict: [
          (s) => `Şunu iyi bilin ki; tespit ettiğim bu **${s.name} mühürleri, Allah’ın izni ve ilmimizin sarsılmaz gücüyle bu andan itibaren hükümsüz kılınacaktır.** Bu büyünün hükmü bitmiş, mühürleri çatlamıştır. Bozma işlemimizle birlikte bu karanlığın üzerinizde barınma şansı kalmamıştır.`,
          (s) => `Bu **${s.name} denilen şer düğümü, mutlak bir manevi otorite ile kökünden sökülüp atılacaktır.** Mühürler birer birer patlatılacak, üzerinizdeki zifiri karanlık yerini ebedi bir ferahlığa bırakacaktır.`
        ],
        process: [
          () => `Yol haritamız mutlak bir disiplinle ilerleyecektir: İlk gün ana mühürlerin kırılma işlemi gerçekleştirilir ve bu bozma anına dair görüntüler doğrudan size iletilir. Ardından 7 gün sürecek olan özel okuma ve niyet sabitleme safhasına geçilir.`,
          () => `Programımız sarsılmazdır: İlk 24 saat içinde büyünün ana damarları kesilir. 3. günden itibaren o ağır yükün kalktığını ve karşı tarafta karşı konulamaz bir yumuşama başladığını bizzat müşahede edeceksiniz.`
        ],
        closing: [
          (s) => `Artık karar vaktidir. Ben bu **${s.name}** karanlığını hayatınızdan sonsuza dek söküp atmaya hazırım. Niyetinizi kesin bir dille belirtmeniz yeterlidir. (Hazırlıklar sebebiyle belirli bir bedel doğmaktadır.) Selametle.`,
          (s) => `Siz niyetinizi sağlam tutarsanız, biz de bu mühürleri ilimle parçalarız. Bu karanlıktan kurtulmak için niyetinizi bildirmeniz kafidir. Selametle.`
        ]
      }
    };

    function runLocalAnalysis() {
      const isim = document.getElementById('isim').value.trim();
      const anne = document.getElementById('anne').value.trim();
      const karsi = document.getElementById('karsi').value.trim();
      const kAnne = document.getElementById('kAnne').value.trim();
      const log = document.getElementById('log').value.toLowerCase();

      if(!isim || !anne || !log) { 
        alert("Lütfen isim, anne adı ve süreci doldurun."); 
        return; 
      }

      document.getElementById('globalOverlay').classList.remove('hidden');
      document.getElementById('globalOverlay').classList.add('flex');
      writeLog("Contextual Analyzer: Extracting patterns...");

      setTimeout(() => {
        // SCORING ENGINE
        let bestSpell = DATABASE.spells[4]; // Default to Kilit
        let highestScore = 0;

        DATABASE.spells.forEach(s => {
          let score = 0;
          s.keywords.forEach(k => {
            if (log.includes(k)) {
              score += 10;
              // Context boost: if multiple keywords from same spell exist
              score += log.split(k).length - 1; 
            }
          });
          
          if (score > highestScore) {
            highestScore = score;
            bestSpell = s;
          }
        });

        writeLog(`Pattern detected: ${bestSpell.id.toUpperCase()}`);
        
        // Context
        const ctx = { isim, anne, karsi, kAnne, log };
        const pick = (arr) => arr[Math.floor(Math.random() * arr.length)];
        
        const finalMetin = [
          pick(DATABASE.blocks.intro)(ctx),
          pick(DATABASE.blocks.detection)(bestSpell, ctx),
          pick(DATABASE.blocks.observation)(bestSpell.observation),
          pick(DATABASE.blocks.verdict)(bestSpell),
          pick(DATABASE.blocks.process)(),
          pick(DATABASE.blocks.closing)(bestSpell)
        ].join("\n\n");

        document.getElementById('verdictOutput').innerText = finalMetin;
        document.getElementById('globalOverlay').classList.add('hidden');
        
        const zone = document.getElementById('resultZone');
        zone.classList.remove('hidden');
        setTimeout(() => {
          zone.classList.remove('opacity-0', 'translate-y-10');
          zone.scrollIntoView({ behavior: 'smooth' });
        }, 50);
        writeLog("Spiritual decree generated.");
      }, 1500);
    }

    function copyVerdict() { 
      navigator.clipboard.writeText(document.getElementById('verdictOutput').innerText); 
      alert("Kopyalandı."); 
    }

    function shareWhatsApp() {
      const t = document.getElementById('verdictOutput').innerText;
      let tel = document.getElementById('tel').value.replace(/\D/g, "");
      if (tel && !tel.startsWith("90")) tel = "90" + tel;
      window.open(`https://wa.me/${tel}?text=${encodeURIComponent(t)}`, "_blank");
    }

    document.getElementById('log').addEventListener('input', (e) => { 
      document.getElementById('charCount').innerText = `${e.target.value.length} CHAR`; 
    });
  </script>
</body>
</html>
